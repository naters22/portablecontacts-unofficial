<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-XRDS-Location"
        content="http://{{ host }}/.well-known/host-meta.xrds" />
  <script type="text/javascript" src="/static/demo.js"></script>
  <title>PortableContacts for {{ domain }}</title>
</head>

<body style="max-width: 700px"
      onload="update_userid_field(); access_token_from_fragment();">
<h1>PortableContacts for {{ domain }}</h1>

<a href="http://portablecontacts.net/">
  <img style="float: right" src="/static/logo_and_name.png" /></a>

<p>This is an unofficial
  <a href="http://portablecontacts.net/">PortableContacts</a> server
  for <a href="http://{{ domain }}/">{{ domain }}</a>. This is the API endpoint:</p>
<ul>
  <li><code>https://{{ host }}/poco/<a href="http://portablecontacts.net/draft-spec.html">...</a></code></li>
</ul>

<p>See the <a href="http://wiki.portablecontacts.net/">PortableContacts doc</a>
  for usage details.</p>

<p>These are the
 <a href="http://docs.oasis-open.org/xri/xrd/v1.0/xrd-1.0.html">XRD</a> and
 <a href="http://hueniverse.com/drafts/draft-xrds-simple-01.html">XRDS-Simple</a>
 (deprecated!) discovery endpoints:</p>
<ul>
  <li><code>https://{{ host }}/.well-known/host-meta</code></li>
  <li><code>https://{{ host }}/.well-known/host-meta.xrds</code></li>
</ul>

<p>Source: <a href="https://github.com/snarfed/portablecontacts-unofficial">github.com/snarfed/portablecontacts-unofficial</a></p>

<hr />

<h2>Demo</h2>

<style type="text/css">
input#userid { color: gray; }
select, input#userid { border: 1px solid gray; }

form p code {
  display: inline;
  padding: 5px;
}

iframe {
  width: 100%;
  min-height: 20em;
  border: 1px solid gray;
}
</style>

<p>URL: <code>/ poco / @me /
<select id="all_or_self" name="all_or_self" onchange="update_userid_field()">
  <option value="all">@all</input>
  <option value="self">@self</input>
</select> /
<input id="userid" name="userid" type="text" value="user id (optional)" size="12"
  onfocus="if (this.value == USER_ID_BLURB) {this.value = ''; this.style.color = 'black'}"
  onblur="update_userid_field()"
  />
</code></p>


<form id="demo" method="get" target="results">
<p>OAuth access token (optional):
{% block oauth_inputs %}
{% endblock %}
<a href="{{ auth_url }}">Authenticate</a></p>
<input type="submit" value="GET" onclick="this.form.action = get_demo_url()" />
</p>
</form>

<iframe name="results">
</iframe>

</body>
</html>
